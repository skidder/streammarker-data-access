box: golang
build:
  # The steps that will be executed on build
  steps:
    - script:
        name: glide install
        code: |
          export GO15VENDOREXPERIMENT=1
          export GLIDE_VERSION=0.10.0
          curl -LO https://github.com/Masterminds/glide/releases/download/${GLIDE_VERSION}/glide-${GLIDE_VERSION}-linux-amd64.tar.gz
          tar -xvzf glide-${GLIDE_VERSION}-linux-amd64.tar.gz
          ./linux-amd64/glide install --quick

    - golint:
        exclude: vendor

    - script:
        name: go build
        code: |
          make build

    - script:
        name: go test
        code: |
          make test
